/**
 * Layout Styles - Standard UI Patterns
 */

@import 'variables';
@import 'mixins';

// ============================================
//   MAIN LAYOUT CONTAINER
// ============================================
#body,
.body {
	padding: 0;
	margin: 0;
	width: 100%;

	> .layout-main {
		margin: 0;
		width: 100%;
		padding: 0;
	}
}

body > .layout-main {
	margin: 0;
	width: 100%;
	padding: 0;
}

.layout-main {
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: row;
	min-height: calc(100vh - #{$navbar-height});
	width: 100%;
	box-sizing: border-box;

	&.layout-two-column {
		@include flex-between;
		gap: 0;
		align-items: flex-start;
		padding: $spacing-xl;
		margin-left: 0;
		width: 100%;
		box-sizing: border-box;

		.layout-main-section-wrapper {
			flex: 1 1 100%;
			min-width: 0;
			max-width: 100%;
			margin: 0;
			padding: 0;
			width: 100%;
		}

		.layout-side-section {
			display: none;
		}
	}
}

// ============================================
//   LAYOUT SECTIONS
// ============================================
.layout-main-section-wrapper {
	margin: 0;
	padding: 0;
	flex: 1 1 auto;
	display: flex;
	flex-direction: column;
	width: 100%;
	min-width: 0;
	max-width: 100%;
	box-sizing: border-box;

	> *:not(.layout-main-section):not(.page-head):not(.frappe-list):not(.list-container):not(.list-view-container):not(.page-content):not(.page_content):not(.page-form):not(.form-layout) {
		margin-left: 0;
		padding-left: 0;
	}

	.page-content {
		margin: 0;
		padding: $spacing-xl !important;
		width: 100%;
		box-sizing: border-box;
	}
}

.layout-main-section,
.main-section {
	background: $bg-gray;
	padding: $spacing-xl;
	margin: 0;
	min-height: calc(100vh - #{$navbar-height});
	box-sizing: border-box;
	width: 100%;

	> *:not(.frappe-list):not(.list-container):not(.list-view-container):not(.page-content):not(.page_content):not(.page-form):not(.form-layout) {
		margin-left: 0;
		padding-left: 0;
	}

	.frappe-list,
	> .frappe-list,
	.list-container,
	> .list-container,
	.list-view-container,
	> .list-view-container {
		margin: 0;
		padding: 0;
		width: 100%;
		box-sizing: border-box;
		background: $bg-white;
		@include border-radius($border-radius-md);
		@include shadow(sm);
	}

	.page-content,
	> .page-content,
	.page_content {
		margin: 0;
		padding: 0;
		width: 100%;
		box-sizing: border-box;
	}

	.form-layout,
	> .form-layout {
		padding: $spacing-xl !important;
		width: 100%;
		box-sizing: border-box;
		@include border;
		@include border-radius($border-radius-md);
		margin-bottom: $spacing-md;
		background: $bg-white;
	}
}

// ============================================
//   PAGE HEAD COMPONENT
// ============================================
.page-head {
	margin: 0;
	padding: 0;
	width: 100%;
	background: $bg-white;
	@include border($border-width-2);
	@include shadow(md);

	.page-head-content {
		@include flex-between($spacing-md);
		padding: $spacing-xl !important;
		min-height: 48px;

		.page-title,
		h1,
		h2 {
			margin: 0;
			padding: 0;
			font-size: $font-size-lg;
			font-weight: $font-weight-semibold;
			color: $text-primary;
			flex: 0 0 auto;
			line-height: $line-height-tight;
			white-space: nowrap;
		}

		.page-actions,
		.list-actions {
			@include flex-center($spacing-sm);
			flex-shrink: 0;

			.btn {
				@include button-base(32px);
				padding: $spacing-sm $spacing-lg;
				white-space: nowrap;

				&.btn-primary {
					background: $info;
					@include border;
					color: $bg-white;
					@include shadow(sm);

					&:hover {
						background: #2563eb;
						@include border;
					}
				}
			}
		}
	}

	// Filter integration
	.filter-section,
	.standard-filter-section {
		padding: 0;
		margin: 0;
		border: none;
		background: transparent;
	}

	~ .page-form,
	+ .page-form {
		display: contents;
		background: transparent;
		border: none;
		margin: 0;
		padding: 0;

		.filter-section,
		.standard-filter-section {
			display: flex;
			align-items: center;
			gap: $spacing-md;
			flex: 1 1 auto;
			margin: 0;
			padding: 0 $spacing-xl;
			border: none;
			background: transparent;
		}
	}
}

// ============================================
//   FILTER COMPONENT
// ============================================
.filter-section,
.standard-filter-section {
	padding: $spacing-xl;
	margin: 0;
	@include flex-center($spacing-md);
	background: $bg-white;
	border: none;
	width: 100%;
	flex: 1 1 auto;
	box-sizing: border-box;

	// Unified filter input container
	.form-group:first-child,
	.col-md-2:first-child,
	> div:first-child {
		flex: 1 1 auto;
		max-width: none;
		min-width: 300px;
		display: block;
		margin: 0 $spacing-md 0 0;
		position: relative;

		&::before {
			content: "ðŸ”";
			position: absolute;
			left: $spacing-md;
			top: 50%;
			transform: translateY(-50%);
			font-size: $font-size-base;
			pointer-events: none;
			z-index: 10;
			opacity: 0.5;
			@include transition(opacity);
		}

		&:has(input:focus)::before {
			opacity: 0.7;
		}

		input[type="text"],
		input[type="search"] {
			@include input-base(36px, 8px 12px 8px 40px);
			font-size: $font-size-md;

			&:focus {
				@include input-focus;
			}

			&:hover {
				@include input-hover;
			}

			&::placeholder {
				color: $text-gray;
				font-style: normal;
			}
		}
	}

	.form-group {
		margin: 0;
	}

	.btn-group {
		margin: 0;
		@include flex-center($spacing-xs);
		gap: $spacing-xs;
	}

	// Filter Button
	.filter-button,
	.filter-btn,
	.btn.filter-btn {
		@include button-base(36px);
		padding: $spacing-sm $spacing-lg;
		font-size: $font-size-md;
		font-weight: $font-weight-medium;
		background: $bg-white;
		color: $text-secondary;
		@include border;
		@include shadow(sm);
		min-width: 80px;
		gap: $spacing-xs;

		&:hover {
			background: $bg-gray-light;
			color: $text-primary;
			@include border;
			@include shadow(md);
			transform: translateY(-1px);
		}

		&:active {
			background: $bg-gray-light;
			transform: translateY(0);
			@include shadow(sm);
		}

		&:focus {
			@include focus-ring;
		}

		&.active {
			background: $info;
			color: $bg-white;
			@include border($border-width, $info);

			&:hover {
				background: #2563eb;
				@include border($border-width, #2563eb);
			}
		}

		.filter-icon,
		.button-icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 16px;
			height: 16px;
			margin: 0;
		}

		.button-label {
			margin-left: $spacing-xs;
		}
	}

	// Clear/Close Button (X button)
	.filter-x-button,
	.clear-filter,
	.btn[title*="Clear"],
	.btn[title*="clear"] {
		@include button-base(36px);
		padding: 0;
		min-width: 36px;
		width: 36px;
		height: 36px;
		background: $bg-white;
		color: $text-secondary;
		@include border;
		@include shadow(sm);
		@include flex-center;
		justify-content: center;

		&:hover {
			background: $error;
			color: $bg-white;
			@include border($border-width, $error);
			@include shadow(md);
			transform: translateY(-1px);
		}

		&:active {
			background: darken($error, 5%);
			transform: translateY(0);
			@include shadow(sm);
		}

		&:focus {
			@include focus-ring(rgba(239, 68, 68, 0.2));
		}

		.filter-icon,
		.button-icon,
		.icon,
		i,
		svg {
			width: 18px;
			height: 18px;
			font-size: 18px;
			line-height: 1;
			margin: 0;
			display: flex;
			align-items: center;
			justify-content: center;
		}
	}

	// Sort Button
	.sort-btn,
	.btn.sort-btn {
		@include button-base(36px);
		padding: $spacing-sm $spacing-lg;
		background: $bg-white;
		color: $text-secondary;
		@include border;
		@include shadow(sm);

		&:hover {
			background: $bg-gray-light;
			color: $text-primary;
			@include shadow(md);
			transform: translateY(-1px);
		}
	}

	// Generic buttons in filter area
	.btn {
		@include button-base(36px);
		padding: $spacing-sm $spacing-lg;
		font-size: $font-size-md;

		&:hover {
			background: $bg-gray-light;
			@include border;
			@include shadow(md);
			transform: translateY(-1px);
		}

		&:active {
			background: $bg-gray-light;
			transform: translateY(0);
			@include shadow(sm);
		}

		&:focus {
			@include focus-ring;
		}

		&.btn-primary,
		&.active {
			background: $info;
			color: $bg-white;
			@include border($border-width, $info);

			&:hover {
				background: #2563eb;
				@include border($border-width, #2563eb);
			}
		}

		.icon,
		i {
			font-size: $font-size-md;
			line-height: 1;
			margin: 0;
		}
	}

	.sort-selector,
	.sort-by {
		margin: 0;
		padding: 0;
		@include flex-center($spacing-sm);
	}

	.badge,
	.sort-indicator {
		padding: 6px $spacing-md;
		font-size: $font-size-sm;
		font-weight: $font-weight-medium;
		@include border-radius;
		background: $bg-gray-light;
		color: $text-primary;
		@include border;
		line-height: $line-height-normal;
		margin: 0;
	}

	> * {
		display: flex;
		align-items: center;
		flex-shrink: 0;
	}

	// Unified Filter Wrapper (for JS-generated unified search)
	.unified-filter-wrapper {
		flex: 1 1 auto;
		max-width: 100%;
		min-width: 350px;
		display: block;
		margin-right: $spacing-md;
		position: relative;

		&::before {
			content: "ðŸ”";
			position: absolute;
			left: $spacing-md;
			top: 50%;
			transform: translateY(-50%);
			font-size: $font-size-md;
			pointer-events: none;
			z-index: 10;
			opacity: 0.5;
			@include transition(opacity);
		}

		&:has(.unified-search-input:focus)::before {
			opacity: 0.7;
		}

		.unified-search-input {
			@include input-base(36px, 8px 12px 8px 40px);
			font-size: $font-size-md;

			&:focus {
				@include input-focus;
			}

			&:hover {
				@include input-hover;
			}

			&::placeholder {
				color: $text-gray;
				font-style: normal;
			}
		}
	}
}

// ============================================
//   FORM CONTAINERS
// ============================================
.page-form {
	margin: 0;
	padding: $spacing-xl !important;
	@include border;
	@include border-radius($border-radius-md);
	margin-bottom: $spacing-md;
	background: $bg-white;
}

.form-layout,
.form-section,
.form-container,
.std-form-layout,
.form-page,
.form-column {
	margin-left: 0;
	padding-left: 0;
	padding-right: 0;
}

// ============================================
//   PAGE CONTENT
// ============================================
.page-container {
	background: $bg-gray;
	padding: $spacing-xl;
	margin: 0;
	width: 100%;
	box-sizing: border-box;

	.page-content {
		margin: 0;
		padding: 0;
		width: 100%;
		box-sizing: border-box;
		background: transparent;
	}
}

.page-body {
	margin: 0;
	padding: 0;
	width: 100%;
	background: transparent;
	box-sizing: border-box;
}

.page-wrapper,
.page-body-wrapper {
	margin-left: 0;
	padding: 0;
	width: 100%;
}

// ============================================
//   SIDEBAR
// ============================================
.layout-side-section,
.list-sidebar {
	padding: $spacing-xl;
	background: $bg-white;
	@include border-left;
	@include border-radius($border-radius-md);
	margin: 0;
	height: fit-content;
	max-height: calc(100vh - #{$navbar-height} - 64px - 40px);
	overflow-y: auto;
	position: sticky;
	top: calc(#{$navbar-height} + 64px + 20px);
	flex-shrink: 0;

	.sidebar-section {
		margin-bottom: $spacing-xl;
		padding-bottom: $spacing-xl;
		@include border-bottom;

		&:last-child {
			border-bottom: none;
			margin-bottom: 0;
		}
	}
}

.list-sidebar {
	display: none;
}

// ============================================
//   CARDS
// ============================================
.frappe-card {
	background: $bg-white;
	@include border-radius($border-radius-md);
	@include border;
	padding: 0;
	margin-bottom: $spacing-xl;
	overflow: hidden;

	.card-header,
	.panel-heading {
		background: $bg-white;
		@include border-bottom;
		padding: $spacing-lg $spacing-xl;
		margin: 0;
	}

	.card-title {
		font-size: $font-size-lg;
		font-weight: $font-weight-semibold;
		color: $text-primary;
		margin: 0;
	}

	.card-body,
	.panel-body {
		padding: $spacing-xl;
	}
}

// ============================================
//   RESPONSIVE
// ============================================
@media (max-width: 768px) {
	.standard-filter-section,
	.filter-section {
		flex-wrap: wrap;
		gap: $spacing-sm;
		padding: $spacing-md $spacing-lg;

		.form-group:first-child,
		.col-md-2:first-child,
		> div:first-child {
			min-width: 100%;
			margin-right: 0;
			margin-bottom: $spacing-sm;
		}
	}
}
